@model CNPM.Models.TblSanPham

@{
    ViewData["Title"] = "Chi tiết sản phẩm";
}

<div class="container">
    <div class="d-flex justify-content-between align-items-center my-3">
        <h2 class="fw-bold text-primary">Nhà thuốc Thái Bình</h2>
        <div>
            @if (!User.Identity.IsAuthenticated)
            {
                <a asp-controller="Account" asp-action="Login" class="btn btn-primary">Đăng nhập</a>
            }
            else
            {
                <div class="d-flex align-items-center">
                    <span class="me-3">Xin chào, <strong>@User.Identity.Name</strong></span>
                    @if (User.IsInRole("Admin"))
                    {
                        <a asp-controller="Admin" asp-action="Index" class="btn btn-outline-primary me-2">Quản lý</a>
                    }
                </div>
            }
        </div>
    </div>

    <!-- Chi tiết sản phẩm -->
    <div class="row">
        <div class="col-md-6">
            @{
                string imagePath = $"/images/{Model.PkSMaSp}.jpg";
                string defaultImagePath = "/images/default-drug.jpg";
            }
            <img src="@imagePath" class="img-fluid rounded" alt="@Model.STenSp"
                 onerror="this.src='@defaultImagePath';">
        </div>
        <div class="col-md-6">
            <h2>@Model.STenSp</h2>
            <!-- Hiển thị loại thuốc -->
            <p>
                <strong>Loại thuốc:</strong>
                @if (Model.FkSMaLoai == "LSP001")
                {
                    <span class="text-success">Thuốc không kê đơn</span>
                }
                else if (Model.FkSMaLoai == "LSP002")
                {
                    <span class="text-danger">Thuốc kê đơn</span>
                }
                else
                {
                    <span class="text-muted">Không xác định</span>
                }
            </p>
            <p><strong>Giá bán:</strong> @String.Format("{0:N0}", Model.FDonGiaBan) VNĐ</p>
            <p><strong>Nhà cung cấp:</strong> @(Model.FkSMaNccNavigation != null ? Model.FkSMaNccNavigation.STenNcc : "Không có thông tin")</p>
            <p><strong>Mô tả:</strong> Thuốc này có công dụng hỗ trợ điều trị các bệnh thông thường, tăng cường sức đề kháng và giúp phục hồi sức khỏe.</p>
            <a asp-controller="Home" asp-action="Index" class="btn btn-secondary">Quay lại</a>
        </div>
    </div>
</div>

@section Scripts {
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
}